/* 
 * bootstrap-list-filter v0.1.1 - 2014-07-19 
 * 
 * Copyright 2014 Stefano Cudini 
 * stefano.cudini@gmail.com 
 * http://labs.easyblog.it/ 
 * 
 * Licensed under the MIT license. 
 * 
 * Demo: 
 * http://labs.easyblog.it/bootstrap-list-filter/ 
 * 
 * Source: 
 * git@github.com:stefanocudini/bootstrap-list-filter.git 
 * 
 */
!function(a){a.fn.btsListFilter=function(b,c){function d(a,b){return a.replace(/\{ *([\w_]+) *\}/g,function(a,c){return b[c]||""})}function e(a,b){var c;return b=b||300,function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,Array.prototype.slice.call(e))},b)}}var f,g=a(this),h=a(b),i=g;return c=a.extend({delay:300,minLength:1,initial:!0,eventKey:"keyup",sourceData:null,sourceTmpl:'<a class="list-group-item" href="#"><span>{title}</span></a>',sourceNode:function(a){return d(c.sourceTmpl,a)},itemEl:".list-group-item",itemChild:null,itemFilter:function(b,d){d=d.replace(new RegExp("^[.]$|[[]|()*]","g"),"");var e=a(b).text(),f=c.initial?"^":"",g=new RegExp(f+d,"i");return g.test(e)}},c),h.on(c.eventKey,e(function(){var b=a(this).val();c.itemEl&&(i=g.find(c.itemEl)),c.itemChild&&(i=i.find(c.itemChild));var d=i.filter(function(){return c.itemFilter(this,b)}),e=i.not(d);c.itemChild&&(d=d.parents(c.itemEl),e=e.parents(c.itemEl).hide()),""!==b&&b.length>=c.minLength?(d.show(),e.hide(),"function"===a.type(c.sourceData)&&(d.hide(),e.hide(),f&&(a.isFunction(f.abort)?f.abort():a.isFunction(f.stop)&&f.stop()),f=c.sourceData.call(this,b,function(b){f=null,d.hide(),e.hide(),g.find(".bts-dynamic-item").remove();for(var h in b)a(c.sourceNode(b[h])).addClass("bts-dynamic-item").appendTo(g)}))):(d.show(),e.show(),g.find(".bts-dynamic-item").remove())},c.delay)).on("blur",function(){a(this).val("").trigger(c.eventKey)}),g}}(jQuery);